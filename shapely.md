# The Shapley value

## General Idea

目的:

用于评价一次结果中不同特征的贡献度

场景:

a,b,c 三个人的工作效率分别是 2,1,3, 同时三人合作时的效率是10. 因为合作有促进或妨碍效果, 此时不能简单的按照 2:1:3 的比例计算每个人的贡献.

## the shapley value

The Shapley value 本是用于评价
由多个玩家（player）共同参与的博弈（game），当参与博弈的玩家不同，所获得的奖励也有所不同，部分玩家在这场博弈中会有较大的贡献，而部分玩家则贡献较小。Shapley value是一个能够根据不同玩家的贡献，将总的奖励公平地分配给每个玩家的度量指标。


对于员工 c, 通过比较其他人与其合作后效率的变化来获得其 *平均边际贡献*

|原组 -> 新组|原效率|新效率| 变化 | 可能的排列个数 |
|----|----|----|----|----|
|{} -> {c} |  0  |  3  |  3 |2|
|{a} -> {a,c} |  2  |  7  |  5 |1|
|{b} -> {b,c} |  1  |  5  |  4 |1|
|{a,b} -> {a,b,c} |  5  |  10  |  5 |2|

c 的shapley value 则为 (2 * 3 + 1 * 5 + 1* 4 + 2 * 5) / (2 + 1 + 1 + 2) = 25 / 6

*Note: 因为c的位置是变动的 所以计算case的个数需要用排列计数来计算*

### properties

Shapley值是满足 Efficiency,Symmetry, Dummy 和 Additivity 的唯一贡献量化指标。

Dummy：若某一玩家i满足对任意集合，均有 [公式] ，则该玩家i为一个dummy玩家。此时，dummy玩家i满足 [公式] 。(check)

Symmetry：对于任意两个玩家i、j，若对于任意集合 [公式] ，均满足 [公式] ，则i和j的Shapley value满足 [公式] 。

Efficiency：保证了所有玩家能够获得的总奖励可以被分配给N中每一个玩家, 即 [公式] 。

Linearity：若有三个博弈u，v，w，满足对于任意玩家集合 [公式] 都有 [公式] ，则对于任意玩家i，其在博弈u中的Shapley value可以表示为其在另外两场博弈中的Shapley value之和，即 [公式] 。
